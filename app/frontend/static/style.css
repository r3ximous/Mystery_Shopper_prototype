:root {
  --bg: #0f1115;
  --bg-alt: #181b21;
  --card: #1f242c;
  --border: #2a3039;
  --accent: #3b82f6;
  --accent-grad: linear-gradient(90deg,#3b82f6,#6366f1 60%,#8b5cf6);
  --text: #f5f7fa;
  --text-dim: #9aa4b1;
  --danger: #ef4444;
  --warn: #f59e0b;
  --radius-sm: 4px;
  --radius-md: 10px;
  --radius-lg: 18px;
  --shadow: 0 4px 12px -2px rgba(0,0,0,.4), 0 2px 4px -1px rgba(0,0,0,.3);
  --focus: 0 0 0 3px rgba(99,102,241,.45);
  font-size: 16px;
}

* { box-sizing: border-box; }
html,body { margin:0; padding:0; font-family: system-ui, 'Segoe UI', Roboto, Arial, sans-serif; background: var(--bg); color: var(--text); -webkit-font-smoothing: antialiased; }

header { display:flex; gap:2rem; align-items:center; padding: .85rem 1.4rem; background: rgba(24,27,33,.7); backdrop-filter: blur(14px); position:sticky; top:0; z-index:50; border-bottom:1px solid var(--border); }
header h1 { font-size:1.15rem; margin:0; font-weight:600; letter-spacing:.5px; background:var(--accent-grad); -webkit-background-clip:text; background-clip:text; color:transparent; }
nav { display:flex; gap:.75rem; flex-wrap:wrap; }
nav a { text-decoration:none; color:var(--text-dim); padding:.55rem .9rem; border-radius: var(--radius-sm); font-size:.85rem; font-weight:500; letter-spacing:.25px; transition:.25s; position:relative; }
nav a:hover, nav a:focus { color:var(--text); background: var(--card); }
nav a.active { background:var(--accent); color:#fff; box-shadow:0 0 0 1px rgba(255,255,255,.08); }

main { width:100%; max-width:1100px; margin: 1.5rem auto 3rem; padding: 0 1.2rem; }
footer { text-align:center; font-size:.7rem; padding:3rem 1rem 4rem; color:var(--text-dim); }

h2 { margin-top:0; font-size:1.4rem; font-weight:600; letter-spacing:.3px; }

.card { background: var(--card); border:1px solid var(--border); border-radius: var(--radius-md); padding:1.1rem 1.2rem 1.35rem; box-shadow: var(--shadow); position:relative; overflow:hidden; }
.card + .card { margin-top:1.1rem; }

.grid { display:grid; gap:1rem; }
@media (min-width: 750px) {
  .grid.cols-2 { grid-template-columns: repeat(2,1fr); }
  .grid.cols-3 { grid-template-columns: repeat(3,1fr); }
}

form.survey { display:flex; flex-direction:column; gap:1.4rem; }
fieldset { border:none; padding:0; margin:0; }
legend { font-size:.9rem; font-weight:600; margin-bottom:.5rem; color:var(--text-dim); }
.label-row { display:flex; flex-direction:column; gap:.4rem; }
.label-row label span { font-size:.7rem; text-transform:uppercase; letter-spacing:.8px; color:var(--text-dim); }

input[type=text], input[type=datetime-local], select { background:#121519; color:var(--text); border:1px solid var(--border); padding:.65rem .75rem; border-radius: var(--radius-sm); font:inherit; width:100%; transition:.2s; }
input:focus, select:focus { outline:none; box-shadow: var(--focus); border-color:#6366f1; }

button { font:inherit; cursor:pointer; background:var(--accent-grad); color:#fff; border:none; padding:.85rem 1.35rem; border-radius: var(--radius-sm); font-weight:600; letter-spacing:.4px; box-shadow:0 2px 6px -1px rgba(0,0,0,.6); position:relative; overflow:hidden; }
button:hover { filter:brightness(1.07); }
button:active { transform:translateY(1px); }
.secondary-btn { background:#232a33; color:var(--text-dim); }
.secondary-btn:hover { color:var(--text); }

.questions { display:grid; gap:1rem; }
@media (min-width: 620px){ .questions { grid-template-columns: repeat(2,1fr); } }
@media (min-width: 980px){ .questions { grid-template-columns: repeat(3,1fr); } }

.q-card { background:#15191f; border:1px solid var(--border); border-radius: var(--radius-md); padding:.85rem .9rem .95rem; display:flex; flex-direction:column; gap:.6rem; position:relative; }
.q-title { font-size:.78rem; text-transform:uppercase; letter-spacing:.75px; font-weight:600; color:var(--text-dim); display:flex; justify-content:space-between; }

.stars { display:inline-flex; flex-direction:row-reverse; gap:.25rem; justify-content:flex-end; }
.stars input { display:none; }
.stars label { font-size:1.15rem; cursor:pointer; color:#334155; transition:.2s; filter:drop-shadow(0 1px 1px rgba(0,0,0,.4)); }
.stars label:hover, .stars label:hover ~ label, .stars input:checked ~ label { color:#fbbf24; }

.inline-actions { display:flex; gap:.8rem; flex-wrap:wrap; }

/* Voice block refined layout */
.voice-block { align-items:flex-start; }
.voice-block .voice-controls { display:flex; gap:.6rem; flex-wrap:wrap; align-items:center; }
.voice-status-group { display:flex; flex-direction:column; gap:2px; min-width:260px; flex:1 1 300px; }
.voice-status-group .status-line { display:flex; gap:.75rem; flex-wrap:wrap; align-items:center; font-size:.65rem; }
.voice-status-group .partials-line { display:flex; gap:.6rem; flex-wrap:wrap; align-items:center; font-size:.6rem; }
.voice-status-group .voice-partial { min-width:90px; max-width:180px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.voice-status-group #voiceProgress, .voice-status-group #latencyStats { font-size:.6rem; }

/* Voice / ASR UI extracted from inline styles */
.spinner { display:inline-block; width:10px; height:10px; border:2px solid var(--border); border-top-color:var(--accent); border-radius:50%; animation:spin .8s linear infinite; vertical-align:middle; margin-left:4px; }
@keyframes spin { from { transform:rotate(0); } to { transform:rotate(360deg); } }

.voice-status { font-size:.7rem; color:var(--text-dim); }
.voice-meta { font-size:.6rem; color:var(--text-dim); display:flex; gap:.75rem; align-items:center; flex-wrap:wrap; margin-top:2px; }
.cpu-load { display:none; }
.asr-retry-btn { display:none; padding:2px 6px; font-size:.55rem; }
.voice-partial { margin-top:2px; font-size:.6rem; min-height:12px; }
.voice-partial.online { color:var(--accent); }
.voice-partial.offline { color:#ff9800; }
.voice-progress { margin-top:4px; font-size:.65rem; letter-spacing:.5px; color:var(--text-dim); }
.transcript-debug { position:fixed; bottom:8px; right:8px; width:260px; max-height:180px; overflow:auto; font:11px monospace; background:rgba(0,0,0,.65); color:#eee; padding:6px; border:1px solid #444; border-radius:4px; z-index:9999; display:none; }
.voice-vu { height:40px; width:180px; margin-left:8px; flex:0 0 auto; border:1px solid var(--border); background:var(--bg-alt); border-radius:4px; }
.asr-legend { display:inline-flex; align-items:center; gap:6px; margin-left:6px; font-size:.55rem; color:var(--text-dim); }
.legend-item { display:inline-flex; align-items:center; gap:4px; }
.legend-swatch { display:inline-block; width:9px; height:9px; border-radius:2px; background:var(--border); }
.legend-swatch.online { background:var(--accent); }
.legend-swatch.offline { background:#ff9800; }

#result { background:#122; padding:1rem; border-radius: var(--radius-md); font-size:.75rem; white-space:pre-wrap; word-break:break-word; max-height:300px; overflow:auto; margin-top:1rem; border:1px solid var(--border); }

.table-wrap { overflow:auto; border:1px solid var(--border); border-radius: var(--radius-md); }
 table { border-collapse:collapse; width:100%; min-width:780px; }
 th, td { padding:.65rem .75rem; text-align:left; font-size:.75rem; }
 thead { background:#161b22; position:sticky; top:0; }
 tbody tr { border-top:1px solid var(--border); }
 tbody tr:hover { background:#1d232b; }

.pill { background:#243045; padding:.25rem .55rem; border-radius:999px; font-size:.65rem; font-weight:500; letter-spacing:.6px; color:#8ab4ff; }
.metric-grid { display:grid; gap:1rem; margin-bottom:1.5rem; }
@media (min-width:680px){ .metric-grid { grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); } }
.metric { background:linear-gradient(145deg,#1d232c,#101317); border:1px solid var(--border); padding:.9rem 1rem 1.05rem; border-radius: var(--radius-md); position:relative; overflow:hidden; }
.metric h4 { margin:0 0 .35rem; font-size:.65rem; font-weight:600; text-transform:uppercase; letter-spacing:.9px; color:var(--text-dim); }
.metric .value { font-size:1.4rem; font-weight:600; letter-spacing:.5px; background:var(--accent-grad); -webkit-background-clip:text; background-clip:text; color:transparent; }
.metric small { font-size:.6rem; color:var(--text-dim); }

.badge { display:inline-block; padding:.2rem .55rem; font-size:.55rem; font-weight:600; letter-spacing:.6px; border:1px solid var(--border); border-radius: var(--radius-sm); background:#18202a; color:var(--text-dim); }

.toggle-theme { background:#232a33; font-size:.7rem; padding:.55rem .8rem; }
.toggle-theme:hover { background:#2d3641; }

@media (max-width:600px){ header { flex-wrap:wrap; gap:.6rem; } nav { order:3; width:100%; } }

.fade-in { animation: fade .5s ease; }
@keyframes fade { from { opacity:0; transform:translateY(4px); } to { opacity:1; transform:translateY(0); } }

/* Light mode (optional) */
.light { --bg:#f5f7fa; --bg-alt:#ffffff; --card:#ffffff; --border:#e2e8f0; --text:#1e293b; --text-dim:#64748b; --shadow:0 4px 12px -2px rgba(0,0,0,.08),0 2px 4px -1px rgba(0,0,0,.06); }
.light header { background: rgba(255,255,255,.9); }
.light nav a { color:#475569; }
.light nav a.active { color:#fff; }
.light .q-card { background:#fff; }
.light input[type=text], .light input[type=datetime-local], .light select { background:#fff; color:#0f172a; }
.light #result { background:#f1f5f9; }
.light tbody tr:hover { background:#f1f5f9; }
